version: 2

sources:
  - name: source
    database: "PRODUCTION_DATABASE"
    schema: SOURCE
    quoting:
      database: false
      schema: false
      identifier: false

    tables:
      - name: source_headcount
        identifier: SOURCE_HEADCOUNT
        loaded_at_field: period_date
        columns:
          - name: employee_id
          - name: period_date
          - name: job_name
          - name: is_contractor

      - name: source_hires
        identifier: SOURCE_HIRES
        description: Hire events.
        loaded_at_field: period_date
        columns:
          - name: employee_id
          - name: hire_date
          - name: period_date

      - name: source_terminations
        identifier: SOURCE_TERMINATIONS
        description: Termination events from Smirkday
        loaded_at_field: period_date
        columns:
          - name: employee_id
            tests:
              - not_null
          - name: termination_date
            tests:
              - not_null

      - name: source_trainings
        identifier: SOURCE_TRAININGS
        description: Training participation.
        loaded_at_field: training_end_date
        columns:
          - name: employee_id
          - name: training_start_date
          - name: training_end_date
          - name: training_name
          - name: training_completion

      - name: source_surveys
        identifier: SOURCE_SURVEYS
        description: Survey Data.
        columns:
          - name: employee_id
          - name: survey_name
          - name: survey_section
          - name: survey_score
          - name: exec_leader
          - name: l1_from_top_leader
          - name: l2_from_top_leader
          - name: l3_from_top_leader
          - name: direct_manager
